<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script>
      AFRAME.registerComponent("gorilla-move", {
        schema: { speed: { type: "number", default: 0.1 } },
        init: function () {
          this.velocity = new THREE.Vector3();
          this.el.sceneEl.addEventListener("triggerdown", (event) => {
            const hand = event.target;
            const direction = new THREE.Vector3();
            hand.object3D.getWorldDirection(direction);
            this.velocity.add(direction.multiplyScalar(-this.data.speed));
          });
        },
        tick: function (time, delta) {
          let player = this.el.object3D;
          player.position.addScaledVector(this.velocity, delta / 1000);
          this.velocity.multiplyScalar(0.9); // Slow down over time
        },
      });
    </script>
  </head>
  <body>
    <a-scene>
      <!-- Player Rig with VR Controllers -->
      <a-entity id="player" gorilla-move>
        <a-entity camera position="0 1.6 0"></a-entity>
        <a-entity id="leftHand" oculus-touch-controls="hand: left"></a-entity>
        <a-entity id="rightHand" oculus-touch-controls="hand: right"></a-entity>
      </a-entity>

      <!-- Environment -->
      <a-box position="0 0 -3" width="10" height="1" depth="10" color="green"></a-box>
    </a-scene>
  </body>
</html>
